{% extends 'layout.html' %}

{% block title %}Convert Images to Images{% endblock %}

{% block content %}
    <h2 class="mb-4">Convert Images (PNG ↔ JPG ↔ WEBP)</h2>

    <div class="card mb-4">
        <div class="card-body">
            <p class="card-text">
                Upload up to <strong>25 images</strong> and convert them into another format (PNG, JPG, WEBP).
            </p>

            <div id="drop-zone" class="drop-zone border border-dashed rounded p-4 text-center mb-3">
                <p class="mb-0">Drag & Drop Images here or Click to Browse</p>
                <input type="file" id="file-input" accept="image/*" multiple style="display: none;">
            </div>

            <div id="file-list-container" class="mb-3" style="display: none;">
                <h5>Files to Convert:</h5>
                <ul id="file-list" class="list-group"></ul>
            </div>

            <div class="mb-3">
                <label for="output-format" class="form-label">Convert to:</label>
                <select id="output-format" class="form-select">
                    <option value="jpg">JPG</option>
                    <option value="png">PNG</option>
                    <option value="webp">WEBP</option>
                </select>
            </div>

            <div id="captcha-area" class="mb-3" style="display: none;">
                <label for="captcha-input" class="form-label fw-bold" id="captcha-question">Loading CAPTCHA...</label>
                <input type="text" id="captcha-input" class="form-control" placeholder="Please solve the math problem">
            </div>

            <button id="convert-btn" class="btn btn-primary" disabled>Convert Images</button>

            <div id="progress-area" class="mt-4" style="display: none;">
                <div class="progress">
                    <div id="convert-progress-bar" class="progress-bar progress-bar-striped progress-bar-animated"
                         role="progressbar" style="width: 0%;" aria-valuenow="0"
                         aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <p class="text-center mt-2" id="progress-text">Converting your images...</p>
            </div>

            <div id="download-area" class="mt-4" style="display: none;">
                <div class="alert alert-success" role="alert">
                    Images converted successfully!
                </div>
                <ul id="download-links-list" class="list-group"></ul>
            </div>

            <div id="error-area" class="mt-4" style="display: none;">
                <div class="alert alert-danger" role="alert">
                    <span id="error-message"></span>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
    <script src="{{ url_for('static', filename='js/img2img.js') }}"></script>
{% endblock %}
